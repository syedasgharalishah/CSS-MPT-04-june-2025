<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSS MPT Daily Quiz - June 04, 2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F8F9FA; /* Very light gray */
            color: #2C3E50; /* Main text color */
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            overflow-x: hidden; /* Prevent horizontal scrolling */
        }

        .top-bar {
            background-color: #ffffff;
            border-bottom: 1px solid #e0e0e0;
            padding: 0.75rem 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .top-bar .date-display {
            color: #6D6875;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .top-bar .whatsapp-link {
            color: #6D6875;
            text-decoration: none;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .header-section {
            background-color: #ffffff;
            padding: 1.5rem 1rem;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            margin-bottom: 1rem;
        }

        .quiz-title {
            font-family: 'Roboto', sans-serif;
            font-size: 1.8rem;
            font-weight: 700;
            color: #2C3E50;
            margin-bottom: 1rem;
        }

        .progress-bar-container {
            width: 80%;
            max-width: 600px;
            height: 10px;
            background-color: #e0e0e0;
            border-radius: 5px;
            margin: 1rem auto;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(to right, #20B2AA, #3EB489);
            border-radius: 5px;
            transition: width 0.3s ease-in-out;
        }

        .banner-logo {
            max-width: 200px;
            height: auto;
            border-radius: 8px;
            margin-top: 1rem;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .credits {
            font-size: 0.85rem;
            color: #6D6875;
            margin-top: 0.5rem;
        }

        .card {
            background-color: #FFF5EE; /* PeachPuff */
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            padding: 1.5rem;
            margin: 1rem auto;
            max-width: 700px;
            width: 90%;
            box-sizing: border-box;
        }

        .button-gradient {
            background-image: linear-gradient(to right, #E6E6FA, #FFDAB9); /* Lavender to PeachPuff */
            color: #2C3E50;
            font-weight: bold;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            cursor: pointer;
            border: none;
        }

        .button-gradient:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }

        .button-gradient:active {
            transform: translateY(0);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .option-button {
            background-color: #ffffff;
            border: 1px solid #ddd;
            padding: 0.75rem 1rem;
            border-radius: 8px;
            text-align: left;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-bottom: 0.75rem;
            color: #2C3E50;
            font-weight: normal;
        }
        
        .option-button:hover:not(.selected) {
            transform: scale(1.02); /* Enlarge by 5% on hover */
            box-shadow: 0 6px 12px rgba(0,0,0,0.1);
        }

        .option-button.selected {
            border-color: #6D6875;
            background-color: #f0f0f0;
            font-weight: bold;
        }

        .option-button.correct {
            background-color: #90EE90; /* LightGreen */
            border-color: #28a745;
            animation: pulse-green 0.5s ease-out forwards;
        }

        .option-button.incorrect {
            background-color: #FF6B6B; /* Red pulse */
            border-color: #dc3545;
            animation: shake-red 0.5s ease-out forwards;
        }

        .special-question {
            border: 3px solid #FFD700; /* Gold border */
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
        }

        .explanation {
            background-color: #e0f7fa;
            border-left: 5px solid #20B2AA;
            padding: 1rem;
            margin-top: 1rem;
            border-radius: 8px;
            color: #2C3E50;
            font-size: 0.9rem;
            display: none; /* Hidden by default */
        }

        .timer-display {
            font-size: 1.2rem;
            font-weight: bold;
            color: #2C3E50;
            margin-bottom: 1rem;
            text-align: center;
        }

        .question-progress {
            font-size: 1rem;
            color: #6D6875;
            margin-bottom: 1rem;
            text-align: center;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .top-bar {
                flex-direction: column;
                gap: 0.5rem;
                padding: 0.5rem;
            }
            .top-bar .date-display {
                order: 2; /* Move date to bottom on mobile */
                font-size: 0.8rem;
                align-self: flex-start; /* Align to start on mobile */
            }
            .top-bar .whatsapp-link {
                order: 1; /* Move whatsapp to top on mobile */
                font-size: 0.8rem;
                align-self: flex-end; /* Align to end on mobile */
            }
            .quiz-title {
                font-size: 1.5rem;
            }
            .banner-logo {
                max-width: 150px;
            }
            .card {
                margin: 0.75rem auto;
                padding: 1rem;
            }
            .button-gradient {
                padding: 0.6rem 1.2rem;
                font-size: 0.9rem;
            }
            .option-button {
                padding: 0.6rem 0.8rem;
                font-size: 0.9rem;
            }
        }

        /* Pulse animation for correct answer */
        @keyframes pulse-green {
            0% { box-shadow: 0 0 0 0 rgba(144, 238, 144, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(144, 238, 144, 0); }
            100% { box-shadow: 0 0 0 0 rgba(144, 238, 144, 0); }
        }

        /* Shake animation for wrong answer */
        @keyframes shake-red {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
    </style>
</head>
<body>

    <script>
        document.addEventListener('contextmenu', event => event.preventDefault()); // Disable right-click
        document.addEventListener('keydown', e => {
            if (e.ctrlKey && (e.key === 'u' || e.key === 'U' || e.key === 'I' || e.key === 'i' || e.key === 'J' || e.key === 'j')) {
                e.preventDefault(); // Disable Ctrl+U, Ctrl+Shift+I, Ctrl+Shift+J
            }
            if (e.key === 'F12') {
                e.preventDefault(); // Disable F12
            }
        });
        document.addEventListener('copy', event => event.preventDefault()); // Disable copy
        document.addEventListener('paste', event => event.preventDefault()); // Disable paste
    </script>

    <div class="top-bar">
        <a href="https://chat.whatsapp.com/your-whatsapp-community-link" target="_blank" class="whatsapp-link">
            <i class="fab fa-whatsapp"></i> Join WhatsApp Community
        </a>
        <div class="date-display" id="liveDate"></div>
    </div>

    <div class="header-section">
        <h1 class="quiz-title" id="quizTitle"></h1>
        <div class="progress-bar-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        <img src="https://i.ibb.co/tMYHtj6n/480709804-2211254089269599-2819007219717277160-n.jpg" alt="Banner Logo" class="banner-logo mx-auto">
        <div class="credits">
            DAWNDIGEST
            <br>
            PREPARED BY: SYED ASGHAR ALI SHAH Contact: 03265762698
            <br>
            Updated on: <span id="updatedDate"></span>
        </div>
    </div>

    <main class="flex-grow flex items-center justify-center p-4">
        <div id="loginPage" class="card">
            <h2 class="text-xl font-bold mb-4 text-center">Login</h2>
            <div class="mb-4">
                <label for="loginId" class="block text-sm font-medium text-gray-700 mb-1">ID:</label>
                <input type="text" id="loginId" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500" value="">
            </div>
            <div class="mb-6">
                <label for="loginPassword" class="block text-sm font-medium text-gray-700 mb-1">Password:</label>
                <input type="password" id="loginPassword" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500" value="">
            </div>
            <p id="loginError" class="text-red-500 text-sm mb-4 hidden">Invalid ID or Password</p>
            <button id="loginBtn" class="button-gradient w-full">Login</button>
        </div>

        <div id="candidateNamePage" class="card hidden">
            <h2 class="text-xl font-bold mb-4 text-center">Candidate Information</h2>
            <div class="mb-6">
                <label for="candidateName" class="block text-sm font-medium text-gray-700 mb-1">Enter Full Name:</label>
                <input type="text" id="candidateName" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500" placeholder="Your Full Name">
            </div>
            <p id="nameError" class="text-red-500 text-sm mb-4 hidden">Please enter your full name.</p>
            <button id="startQuizBtn" class="button-gradient w-full">Start Quiz</button>
        </div>

        <div id="quizPage" class="card hidden">
            <div class="timer-display" id="timerDisplay"></div>
            <div class="question-progress" id="questionProgress"></div>
            <h2 class="text-lg font-semibold mb-4" id="questionText"></h2>
            <div id="optionsContainer" class="flex flex-col gap-3 mb-6">
                </div>
            <div class="flex justify-between">
                <button id="prevBtn" class="button-gradient px-6 py-2">Previous</button>
                <button id="nextBtn" class="button-gradient px-6 py-2">Next</button>
                <button id="submitQuizBtn" class="button-gradient px-6 py-2 hidden">Submit Quiz</button>
            </div>
            <div id="explanationDiv" class="explanation"></div>
        </div>

        <div id="resultsPage" class="card hidden">
            <h2 class="text-xl font-bold mb-4 text-center">Quiz Results</h2>
            <p class="mb-2"><strong>Candidate Name:</strong> <span id="resultCandidateName"></span></p>
            <p class="mb-2"><strong>Date of Quiz:</strong> <span id="resultDate"></span></p>
            <p class="mb-2"><strong>Score:</strong> <span id="resultScore"></span> / 200</p>
            <p class="mb-2"><strong>Correct Answers:</strong> <span id="resultCorrect"></span></p>
            <p class="mb-2"><strong>Incorrect Answers:</strong> <span id="resultIncorrect"></span></p>
            <p class="mb-4"><strong>Time Taken:</strong> <span id="resultTimeTaken"></span></p>
            <button id="restartQuizBtn" class="button-gradient w-full">Restart Quiz</button>
        </div>
    </main>

    <script>
        // Set the current date for display and logic
        const CURRENT_DATE_STR = "June 04, 2025"; // MANDATORY DAILY INPUT
        const CURRENT_DATE = new Date(CURRENT_DATE_STR);

        // Update header dates
        document.getElementById('liveDate').textContent = CURRENT_DATE_STR;
        document.getElementById('updatedDate').textContent = CURRENT_DATE_STR;
        document.getElementById('quizTitle').textContent = `CSS MPT Daily Quiz – ${CURRENT_DATE_STR}`;

        // Quiz Data Structure
        let quizQuestions = []; // Will be populated by initializeQuiz
        let currentQuestionIndex = 0;
        let userAnswers = []; // Stores { questionIndex: int, selectedOptionIndex: int, isCorrect: bool }
        let quizStartTime;
        let timerInterval;
        const QUIZ_DURATION_MINUTES = 40;
        let specialQuestionIndex = -1; // To store the index of the special question

        // --- Helper Functions ---

        /**
         * Shuffles an array in place using Fisher-Yates (Knuth) shuffle.
         * @param {Array} array - The array to shuffle.
         */
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        /**
         * Generates a unique ID for Formspree submission.
         * @returns {string} A unique ID.
         */
        function generateUniqueId() {
            return 'quiz_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
        }

        /**
         * Converts seconds to a human-readable time string (e.g., "35 minutes 10 seconds").
         * @param {number} totalSeconds - The total number of seconds.
         * @returns {string} Formatted time string.
         */
        function formatTime(totalSeconds) {
            const minutes = Math.floor(totalSeconds / 60);
            const seconds = totalSeconds % 60;
            return `${minutes} minutes ${seconds} seconds`;
        }

        /**
         * Updates the progress bar and question progress text.
         */
        function updateProgressBar() {
            const progress = ((currentQuestionIndex + 1) / quizQuestions.length) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;
            document.getElementById('questionProgress').textContent = `Question ${currentQuestionIndex + 1}/${quizQuestions.length} – ${Math.round(progress)}% Complete`;
        }

        /**
         * Displays a specific page and hides others.
         * @param {string} pageId - The ID of the page to display.
         */
        function showPage(pageId) {
            document.getElementById('loginPage').classList.add('hidden');
            document.getElementById('candidateNamePage').classList.add('hidden');
            document.getElementById('quizPage').classList.add('hidden');
            document.getElementById('resultsPage').classList.add('hidden');
            document.getElementById(pageId).classList.remove('hidden');
        }

        /**
         * Starts the quiz timer.
         */
        function startTimer() {
            quizStartTime = Date.now();
            let timeLeft = QUIZ_DURATION_MINUTES * 60; // Convert minutes to seconds

            function updateTimerDisplay() {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                document.getElementById('timerDisplay').textContent = `Time Left: ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    submitQuiz(true); // Auto-submit on timer expiry
                } else {
                    timeLeft--;
                }
            }

            updateTimerDisplay(); // Initial display
            timerInterval = setInterval(updateTimerDisplay, 1000);
        }

        /**
         * Renders the current question and its options.
         */
        function renderQuestion() {
            const question = quizQuestions[currentQuestionIndex];
            document.getElementById('questionText').innerHTML = question.question;
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = ''; // Clear previous options

            // Remove special-question class from previous question if any
            const quizCard = document.getElementById('quizPage');
            quizCard.classList.remove('special-question');

            // Add special-question class if it's today's special question and date matches
            const today = new Date();
            const todayNormalized = new Date(today.getFullYear(), today.getMonth(), today.getDate());
            const currentQuizDateNormalized = new Date(CURRENT_DATE.getFullYear(), CURRENT_DATE.getMonth(), CURRENT_DATE.getDate());

            if (question.special && todayNormalized.getTime() === currentQuizDateNormalized.getTime()) {
                quizCard.classList.add('special-question');
            }

            // Shuffle options for the current question
            const shuffledOptions = [...question.options];
            shuffleArray(shuffledOptions);


            shuffledOptions.forEach((option, index) => {
                const button = document.createElement('button');
                button.classList.add('option-button', 'w-full');
                button.textContent = option;
                // Store the original index of the option, not its shuffled position
                button.dataset.originalOptionIndex = question.options.indexOf(option);
                button.onclick = () => selectOption(parseInt(button.dataset.originalOptionIndex));

                // Apply selected state if already answered
                const userAnswer = userAnswers[currentQuestionIndex];
                if (userAnswer && userAnswer.selectedOptionIndex === parseInt(button.dataset.originalOptionIndex)) {
                    button.classList.add('selected');
                    if (userAnswer.isCorrect) {
                        button.classList.add('correct');
                    } else {
                        button.classList.add('incorrect');
                    }
                    // Disable all options if already answered
                    Array.from(optionsContainer.children).forEach(optBtn => optBtn.disabled = true);
                    document.getElementById('explanationDiv').style.display = 'block';
                }
                optionsContainer.appendChild(button);
            });

            // Show/hide explanation
            const explanationDiv = document.getElementById('explanationDiv');
            explanationDiv.innerHTML = `<p class="font-bold">Explanation:</p><p>${question.explanation}</p>`;
            if (userAnswers[currentQuestionIndex] && userAnswers[currentQuestionIndex].selectedOptionIndex !== undefined) {
                explanationDiv.style.display = 'block';
            } else {
                explanationDiv.style.display = 'none';
            }

            // Update navigation buttons visibility
            document.getElementById('prevBtn').classList.toggle('hidden', currentQuestionIndex === 0);
            document.getElementById('nextBtn').classList.toggle('hidden', currentQuestionIndex === quizQuestions.length - 1);
            document.getElementById('submitQuizBtn').classList.toggle('hidden', currentQuestionIndex !== quizQuestions.length - 1);

            updateProgressBar();
        }

        /**
         * Handles option selection by the user.
         * @param {number} selectedOptionOriginalIndex - The original index of the selected option.
         */
        function selectOption(selectedOptionOriginalIndex) {
            const question = quizQuestions[currentQuestionIndex];
            // If already answered, do nothing
            if (userAnswers[currentQuestionIndex] && userAnswers[currentQuestionIndex].selectedOptionIndex !== undefined) {
                return;
            }

            const isCorrect = (selectedOptionOriginalIndex === question.correctOptionIndex);

            // Store user's answer
            userAnswers[currentQuestionIndex] = {
                questionIndex: currentQuestionIndex,
                selectedOptionIndex: selectedOptionOriginalIndex,
                isCorrect: isCorrect
            };

            // Apply visual feedback and disable options
            const optionsContainer = document.getElementById('optionsContainer');
            Array.from(optionsContainer.children).forEach((button) => {
                button.disabled = true; // Disable all options after selection
                button.classList.remove('option-button:hover:not(.selected)'); // Remove hover effect

                const btnOriginalIndex = parseInt(button.dataset.originalOptionIndex);

                if (btnOriginalIndex === selectedOptionOriginalIndex) {
                    button.classList.add('selected');
                    if (isCorrect) {
                        button.classList.add('correct');
                    } else {
                        button.classList.add('incorrect');
                    }
                }
                // Highlight the correct answer if the selected answer was incorrect
                if (!isCorrect && btnOriginalIndex === question.correctOptionIndex) {
                    button.classList.add('correct'); // Highlight correct answer
                }
            });

            // Show explanation
            document.getElementById('explanationDiv').style.display = 'block';
        }

        /**
         * Navigates to the next question.
         */
        function nextQuestion() {
            if (currentQuestionIndex < quizQuestions.length - 1) {
                currentQuestionIndex++;
                renderQuestion();
            }
        }

        /**
         * Navigates to the previous question.
         */
        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                renderQuestion();
            }
        }

        /**
         * Submits the quiz, calculates results, and displays them.
         * @param {boolean} isAutoSubmit - True if submitted by timer, false otherwise.
         */
        function submitQuiz(isAutoSubmit = false) {
            clearInterval(timerInterval); // Stop the timer

            const endTime = Date.now();
            const timeTakenSeconds = Math.round((endTime - quizStartTime) / 1000);

            let correctCount = 0;
            let incorrectCount = 0;
            let attemptedCount = 0;

            userAnswers.forEach(answer => {
                if (answer && answer.selectedOptionIndex !== undefined) {
                    attemptedCount++;
                    if (answer.isCorrect) {
                        correctCount++;
                    } else {
                        incorrectCount++;
                    }
                }
            });

            const score = (correctCount * 2) - (incorrectCount * 1);
            const candidateName = document.getElementById('candidateName').value;

            document.getElementById('resultCandidateName').textContent = candidateName;
            document.getElementById('resultDate').textContent = CURRENT_DATE_STR;
            document.getElementById('resultScore').textContent = score;
            document.getElementById('resultCorrect').textContent = `${correctCount}`;
            document.getElementById('resultIncorrect').textContent = `${incorrectCount}`;
            document.getElementById('resultTimeTaken').textContent = formatTime(timeTakenSeconds);

            showPage('resultsPage');

            // Silent Formspree submission
            const formData = new FormData();
            formData.append('Candidate Name', candidateName);
            formData.append('Date of Quiz', CURRENT_DATE_STR);
            formData.append('Score', score);
            formData.append('Correct Answers', correctCount);
            formData.append('Incorrect Answers', incorrectCount);
            formData.append('Time Taken', formatTime(timeTakenSeconds));
            formData.append('Quiz ID', generateUniqueId()); // Unique ID for each submission

            fetch('https://formspree.io/f/xwpvddea', { // Changed to xwpvddea as per new request
                method: 'POST',
                body: formData,
                headers: {
                    'Accept': 'application/json'
                }
            }).then(response => {
                if (response.ok) {
                    console.log('Quiz results submitted successfully!');
                } else {
                    console.error('Formspree submission failed.');
                }
            }).catch(error => {
                console.error('Error during Formspree submission:', error);
            });
        }

        // --- Event Listeners ---

        document.getElementById('loginBtn').addEventListener('click', () => {
            const id = document.getElementById('loginId').value;
            const password = document.getElementById('loginPassword').value;
            const loginError = document.getElementById('loginError');

            if (id === '3JUNE' && password === 'free') { // Updated login credentials
                loginError.classList.add('hidden');
                showPage('candidateNamePage');
            } else {
                loginError.classList.remove('hidden');
            }
        });

        document.getElementById('startQuizBtn').addEventListener('click', () => {
            const candidateNameInput = document.getElementById('candidateName');
            const candidateName = candidateNameInput.value.trim();
            const nameError = document.getElementById('nameError');

            if (candidateName) {
                nameError.classList.add('hidden');
                // Initialize userAnswers array for the new quiz attempt
                userAnswers = new Array(quizQuestions.length).fill(null);
                currentQuestionIndex = 0;
                startTimer();
                renderQuestion();
                showPage('quizPage');
            } else {
                nameError.classList.remove('hidden');
            }
        });

        document.getElementById('nextBtn').addEventListener('click', nextQuestion);
        document.getElementById('prevBtn').addEventListener('click', prevQuestion);
        document.getElementById('submitQuizBtn').addEventListener('click', () => submitQuiz(false));
        document.getElementById('restartQuizBtn').addEventListener('click', () => {
            // Reset quiz state
            currentQuestionIndex = 0;
            userAnswers = [];
            clearInterval(timerInterval); // Clear any lingering timer
            // Re-shuffle questions for a new attempt
            initializeQuiz();
            showPage('loginPage'); // Go back to login for a fresh start
        });

        // --- Quiz Initialization ---
        function initializeQuiz() {
            // Clear previous questions
            quizQuestions.length = 0;

            // General Knowledge (34 MCQs) - Names of Parliaments: Pages 50-52
            const generalKnowledgeMCQs = [
                { question: "What is the name of Afghanistan's parliament?", options: ["National Assembly", "Wolesi Jirga", "Loya Jirga", "None of these"], correctOptionIndex: 1, explanation: "The parliament of Afghanistan is known as Wolesi Jirga.", difficulty: "easy", source_page: 50 },
                { question: "What is the name of Albania's parliament?", options: ["People's Assembly", "Kuvendi Popullor", "National Assembly", "None of these"], correctOptionIndex: 1, explanation: "Albania's parliament is Kuvendi Popullor.", difficulty: "easy", source_page: 50 },
                { question: "The parliament of Bangladesh is known as:", options: ["Jatiya Sangsad", "National People's Congress", "House of Representatives", "None of these"], correctOptionIndex: 0, explanation: "Bangladesh's parliament is Jatiya Sangsad.", difficulty: "easy", source_page: 50 },
                { question: "What is the name of Argentina's parliament?", options: ["National Congress", "Federal Assembly", "People's Council", "Argentine Parliament"], correctOptionIndex: 0, explanation: "Argentina's parliament is National Congress.", difficulty: "medium", source_page: 50 },
                { question: "What is the name of Australia's parliament?", options: ["Federal Parliament", "Parliament House", "Commonwealth Parliament", "None of these"], correctOptionIndex: 0, explanation: "Australia's parliament is Federal Parliament.", difficulty: "medium", source_page: 50 },
                { question: "What is the name of Austria's parliament?", options: ["Federal Assembly", "National Council", "Federal Parliament", "None of these"], correctOptionIndex: 1, explanation: "Austria's parliament is National Council.", difficulty: "medium", source_page: 50 },
                { question: "What is the name of Belgium's parliament?", options: ["Federal Parliament", "Chamber of Representatives", "Senate", "None of these"], correctOptionIndex: 0, explanation: "Belgium's parliament is Federal Parliament.", difficulty: "medium", source_page: 50 },
                { question: "What is the name of Bhutan's parliament?", options: ["National Assembly", "Tshogdu", "Lhengye Zhungtshog", "None of these"], correctOptionIndex: 1, explanation: "Bhutan's parliament is Tshogdu.", difficulty: "medium", source_page: 50 },
                { question: "What is the name of Brazil's parliament?", options: ["National Congress", "Federal Senate", "Chamber of Deputies", "None of these"], correctOptionIndex: 0, explanation: "Brazil's parliament is National Congress.", difficulty: "medium", source_page: 50 },
                { question: "What is the name of Canada's parliament?", options: ["Parliament of Canada", "House of Commons", "Senate", "None of these"], correctOptionIndex: 0, explanation: "Canada's parliament is Parliament of Canada.", difficulty: "medium", source_page: 50 },
                { question: "What is the name of China's parliament?", options: ["National People's Congress", "National Assembly", "Standing Committee", "None of these"], correctOptionIndex: 0, explanation: "China's parliament is National People's Congress.", difficulty: "medium", source_page: 50 },
                { question: "What is the name of Cuba's parliament?", options: ["National Assembly of People's Power", "National Congress", "People's Council", "None of these"], correctOptionIndex: 0, explanation: "Cuba's parliament is National Assembly of People's Power.", difficulty: "medium", source_page: 50 },
                { question: "What is the name of Denmark's parliament?", options: ["Folketing", "Riksdag", "Storting", "Eduskunta"], correctOptionIndex: 0, explanation: "Denmark's parliament is Folketing.", difficulty: "medium", source_page: 51 },
                { question: "What is the name of Egypt's parliament?", options: ["People's Assembly", "House of Representatives", "Shura Council", "None of these"], correctOptionIndex: 0, explanation: "Egypt's parliament is People's Assembly.", difficulty: "medium", source_page: 51 },
                { question: "What is the name of Finland's parliament?", options: ["Eduskunta", "Riksdag", "Storting", "Folketing"], correctOptionIndex: 0, explanation: "Finland's parliament is Eduskunta.", difficulty: "medium", source_page: 51 },
                { question: "What is the name of France's parliament?", options: ["Parliament of France", "National Assembly", "Senate", "None of these"], correctOptionIndex: 0, explanation: "France's parliament is Parliament of France.", difficulty: "medium", source_page: 51 },
                { question: "What is the name of Germany's parliament?", options: ["Bundestag", "Bundesrat", "Reichstag", "None of these"], correctOptionIndex: 0, explanation: "Germany's parliament is Bundestag.", difficulty: "medium", source_page: 51 },
                { question: "What is the name of Greece's parliament?", options: ["Parliament of the Hellenes", "National Assembly", "Vouli", "None of these"], correctOptionIndex: 0, explanation: "Greece's parliament is Parliament of the Hellenes.", difficulty: "medium", source_page: 51 },
                { question: "What is the name of Hungary's parliament?", options: ["National Assembly", "Orszaggyules", "Parliament House", "None of these"], correctOptionIndex: 1, explanation: "Hungary's parliament is Orszaggyules.", difficulty: "medium", source_page: 51 },
                { question: "What is the name of Iceland's parliament?", options: ["Althing", "Folketing", "Storting", "Riksdag"], correctOptionIndex: 0, explanation: "Iceland's parliament is Althing.", difficulty: "medium", source_page: 51 },
                { question: "What is the name of India's parliament?", options: ["Sansad", "Lok Sabha", "Rajya Sabha", "None of these"], correctOptionIndex: 0, explanation: "India's parliament is Sansad.", difficulty: "medium", source_page: 51 },
                { question: "What is the name of Indonesia's parliament?", options: ["People's Consultative Assembly", "House of Representatives", "Majelis Permusyawaratan Rakyat", "None of these"], correctOptionIndex: 0, explanation: "Indonesia's parliament is People's Consultative Assembly.", difficulty: "medium", source_page: 51 },
                { question: "What is the name of Iran's parliament?", options: ["Majlis", "Islamic Consultative Assembly", "National Assembly", "None of these"], correctOptionIndex: 0, explanation: "Iran's parliament is Majlis (Islamic Consultative Assembly).", difficulty: "medium", source_page: 51 },
                { question: "What is the name of Ireland's parliament?", options: ["Oireachtas", "Dáil Éireann", "Seanad Éireann", "None of these"], correctOptionIndex: 0, explanation: "Ireland's parliament is Oireachtas.", difficulty: "medium", source_page: 51 },
                { question: "What is the name of Israel's parliament?", options: ["Knesset", "Majlis", "Parliament", "None of these"], correctOptionIndex: 0, explanation: "Israel's parliament is Knesset.", difficulty: "medium", source_page: 51 },
                { question: "What is the name of Italy's parliament?", options: ["Parliament of Italy", "Chamber of Deputies", "Senate of the Republic", "None of these"], correctOptionIndex: 0, explanation: "Italy's parliament is Parliament of Italy.", difficulty: "medium", source_page: 51 },
                { question: "What is the name of Japan's parliament?", options: ["Diet", "National Diet", "House of Representatives", "None of these"], correctOptionIndex: 1, explanation: "Japan's parliament is National Diet.", difficulty: "medium", source_page: 51 },
                { question: "What is the name of Jordan's parliament?", options: ["National Assembly", "House of Representatives", "Senate", "None of these"], correctOptionIndex: 0, explanation: "Jordan's parliament is National Assembly.", difficulty: "medium", source_page: 51 },
                { question: "What is the name of Kazakhstan's parliament?", options: ["Parliament of Kazakhstan", "Majilis", "Senate", "None of these"], correctOptionIndex: 0, explanation: "Kazakhstan's parliament is Parliament of Kazakhstan.", difficulty: "medium", source_page: 51 },
                { question: "What is the name of Kenya's parliament?", options: ["National Assembly", "Senate", "Parliament of Kenya", "None of these"], correctOptionIndex: 0, explanation: "Kenya's parliament is National Assembly.", difficulty: "medium", source_page: 51 },
                { question: "What is the name of North Korea's parliament?", options: ["Supreme People's Assembly", "Presidium", "Standing Committee", "None of these"], correctOptionIndex: 0, explanation: "North Korea's parliament is Supreme People's Assembly.", difficulty: "tough", source_page: 51 },
                { question: "What is the name of South Korea's parliament?", options: ["National Assembly", "Parliament of South Korea", "People's Council", "None of these"], correctOptionIndex: 0, explanation: "South Korea's parliament is National Assembly.", difficulty: "tough", source_page: 51 },
                { question: "What is the name of Kuwait's parliament?", options: ["National Assembly", "Majlis al-Umma", "People's Council", "None of these"], correctOptionIndex: 0, explanation: "Kuwait's parliament is National Assembly (Majlis al-Umma).", difficulty: "tough", source_page: 51 },
                { question: "What is the name of Kyrgyzstan's parliament?", options: ["Jogorku Kenesh", "Supreme Council", "National Assembly", "None of these"], correctOptionIndex: 0, explanation: "Kyrgyzstan's parliament is Jogorku Kenesh.", difficulty: "tough", source_page: 51 }
            ];
            quizQuestions.push(...generalKnowledgeMCQs);

            // Mathematics (33 MCQs) - Races and Games of Skills: Page 529 & Stock and Shares: Page 530
            const mathematicsMCQs = [
                { question: "In a 100-meter race, A can give B a start of 10 meters. This means:", options: ["A runs 100m, B runs 90m", "A runs 90m, B runs 100m", "A runs 100m, B runs 110m", "A runs 110m, B runs 100m"], correctOptionIndex: 0, explanation: "A gives B a start of 10 meters, so A starts from 0 and B starts from 10m. When A finishes 100m, B has run 90m.", difficulty: "easy", source_page: 529 },
                { question: "In a game of 50 points, A can give B 10 points. This means:", options: ["A scores 50, B scores 40", "A scores 40, B scores 50", "A scores 50, B scores 60", "A scores 60, B scores 50"], correctOptionIndex: 0, explanation: "A gives B a start of 10 points, so when A scores 50 points, B scores 50-10 = 40 points.", difficulty: "easy", source_page: 529 },
                { question: "What is the meaning of 'stock' in the context of shares?", options: ["A type of bond", "A collection of shares in a company", "A physical commodity", "A type of loan"], correctOptionIndex: 1, explanation: "Stock refers to a collection of shares in a company, often treated as a single unit.", difficulty: "easy", source_page: 530 },
                { question: "What is 'face value' of a share?", options: ["The market price of the share", "The original value written on the share certificate", "The dividend paid per share", "The profit earned per share"], correctOptionIndex: 1, explanation: "Face value is the nominal value or par value of a share as stated on the certificate.", difficulty: "medium", source_page: 530 },
                { question: "What is 'market value' of a share?", options: ["The original value of the share", "The price at which the share is traded in the market", "The dividend paid on the share", "The profit earned on the share"], correctOptionIndex: 1, explanation: "Market value is the current price at which a share can be bought or sold on the stock exchange.", difficulty: "medium", source_page: 530 },
                { question: "If a share is quoted 'at par', it means its market value is:", options: ["Higher than face value", "Lower than face value", "Equal to face value", "Zero"], correctOptionIndex: 2, explanation: "'At par' means the market value is equal to the face value.", difficulty: "medium", source_page: 530 },
                { question: "If a share is quoted 'at premium', it means its market value is:", options: ["Higher than face value", "Lower than face value", "Equal to face value", "Zero"], correctOptionIndex: 0, explanation: "'At premium' means the market value is higher than the face value.", difficulty: "medium", source_page: 530 },
                { question: "If a share is quoted 'at discount', it means its market value is:", options: ["Higher than face value", "Lower than face value", "Equal to face value", "Zero"], correctOptionIndex: 1, explanation: "'At discount' means the market value is lower than the face value.", difficulty: "medium", source_page: 530 },
                { question: "What is 'dividend' in the context of shares?", options: ["The profit earned by selling shares", "A portion of company's profit distributed to shareholders", "The initial investment in shares", "The loan taken by the company"], correctOptionIndex: 1, explanation: "Dividend is a payment made by a corporation to its shareholders, usually as a distribution of profits.", difficulty: "medium", source_page: 530 },
                { question: "What is 'brokerage' in stock market transactions?", options: ["Profit from selling shares", "Commission charged by a broker for buying/selling shares", "Dividend earned on shares", "Tax on share transactions"], correctOptionIndex: 1, explanation: "Brokerage is the fee charged by a broker for facilitating stock trades.", difficulty: "medium", source_page: 530 },
                { question: "In a 200m race, A can give B a start of 20m. If A runs at 10 m/s, what is B's speed?", options: ["8 m/s", "9 m/s", "10 m/s", "11 m/s"], correctOptionIndex: 1, explanation: "A runs 200m in 200/10 = 20s. In 20s, B runs 200-20 = 180m. So B's speed = 180/20 = 9 m/s.", difficulty: "tough", source_page: 529 },
                { question: "In a 100m race, A beats B by 10m and B beats C by 10m. By how many meters does A beat C in the same race?", options: ["10m", "19m", "20m", "21m"], correctOptionIndex: 1, explanation: "When A runs 100m, B runs 90m. When B runs 100m, C runs 90m. So when B runs 90m, C runs (90/100)*90 = 81m. Thus, A beats C by 100-81 = 19m.", difficulty: "tough", source_page: 529 },
                { question: "A person invests in 100 shares of a company with a face value of $10 each, quoted at a premium of $2. What is the total investment?", options: ["$1000", "$1200", "$800", "$1020"], correctOptionIndex: 1, explanation: "Market value per share = Face value + Premium = $10 + $2 = $12. Total investment = Number of shares × Market value per share = 100 × 12 = $1200.", difficulty: "tough", source_page: 530 },
                { question: "A company declares a 15% dividend on its shares. If the face value of each share is $100, what is the dividend received by a person holding 50 shares?", options: ["$750", "$150", "$500", "$75"], correctOptionIndex: 0, explanation: "Dividend per share = 15% of $100 = $15. Total dividend = Number of shares × Dividend per share = 50 × 15 = $750.", difficulty: "tough", source_page: 530 },
                { question: "If the current market value of a share is $120 and its face value is $100, what is the premium percentage?", options: ["10%", "15%", "20%", "25%"], correctOptionIndex: 2, explanation: "Premium = Market value - Face value = $120 - $100 = $20. Premium percentage = (Premium / Face value) × 100 = (20/100) × 100 = 20%.", difficulty: "tough", source_page: 530 },
                { question: "In a race of 1 km, A beats B by 100 meters. If A runs at 10 m/s, what is B's speed?", options: ["8 m/s", "9 m/s", "9.5 m/s", "10 m/s"], correctOptionIndex: 1, explanation: "A runs 1000m in 1000/10 = 100s. In 100s, B runs 1000-100 = 900m. So B's speed = 900/100 = 9 m/s.", difficulty: "medium", source_page: 529 },
                { question: "A person buys shares worth $5000. If the brokerage is 0.5%, what is the total amount paid?", options: ["$5000", "$5025", "$4975", "$5050"], correctOptionIndex: 1, explanation: "Brokerage amount = 0.5% of $5000 = 0.005 × 5000 = $25. Total amount paid = $5000 + $25 = $5025.", difficulty: "medium", source_page: 530 },
                { question: "In a game of 80 points, A can give B 16 points. How many points can A give B in a game of 100 points?", options: ["16 points", "20 points", "24 points", "25 points"], correctOptionIndex: 1, explanation: "When A scores 80, B scores 80-16 = 64. Ratio A:B = 80:64 = 5:4. In a game of 100 points, if A scores 100, B scores (4/5)*100 = 80. So A gives B 100-80 = 20 points.", difficulty: "tough", source_page: 529 },
                { question: "A share with a face value of $50 is traded at a discount of 10%. What is its market value?", options: ["$40", "$45", "$50", "$55"], correctOptionIndex: 1, explanation: "Discount amount = 10% of $50 = $5. Market value = Face value - Discount = $50 - $5 = $45.", difficulty: "medium", source_page: 530 },
                { question: "If the annual dividend on a share is $12 and its face value is $100, what is the dividend percentage?", options: ["10%", "12%", "15%", "20%"], correctOptionIndex: 1, explanation: "Dividend percentage = (Dividend / Face value) × 100 = (12/100) × 100 = 12%.", difficulty: "medium", source_page: 530 },
                { question: "In a 500m race, if A runs at 5 m/s and B runs at 4 m/s, by how many meters will A beat B?", options: ["50m", "100m", "125m", "150m"], correctOptionIndex: 1, explanation: "Time taken by A = 500/5 = 100s. In 100s, B runs 4 * 100 = 400m. A beats B by 500-400 = 100m.", difficulty: "tough", source_page: 529 },
                { question: "A company's shares are quoted at $150. If the face value is $100, what is the premium?", options: ["$25", "$50", "$75", "$100"], correctOptionIndex: 1, explanation: "Premium = Market value - Face value = $150 - $100 = $50.", difficulty: "easy", source_page: 530 },
                { question: "What is the term for the total number of shares issued by a company?", options: ["Stock", "Capital", "Equity", "Issued shares"], correctOptionIndex: 3, explanation: "Issued shares refer to the total number of shares that a company has sold to investors.", difficulty: "medium", source_page: 530 },
                { question: "If a share is bought for $80 and sold for $95, what is the profit per share?", options: ["$5", "$10", "$15", "$20"], correctOptionIndex: 2, explanation: "Profit = Selling price - Buying price = $95 - $80 = $15.", difficulty: "easy", source_page: 530 },
                { question: "In a race, if A runs 100m while B runs 90m, and C runs 80m, how much start can A give C in a 100m race?", options: ["10m", "15m", "20m", "25m"], correctOptionIndex: 2, explanation: "When A runs 100m, C runs 80m. So A can give C a start of 100-80 = 20m.", difficulty: "medium", source_page: 529 },
                { question: "A stock is quoted at $120. If its face value is $100, what is the percentage premium?", options: ["10%", "15%", "20%", "25%"], correctOptionIndex: 2, explanation: "Premium = $120 - $100 = $20. Percentage premium = ($20/$100) * 100% = 20%.", difficulty: "medium", source_page: 530 },
                { question: "What is the primary purpose of a stock exchange?", options: ["To issue new shares", "To facilitate the buying and selling of existing shares", "To provide loans to companies", "To regulate company profits"], correctOptionIndex: 1, explanation: "A stock exchange provides a platform for trading securities.", difficulty: "medium", source_page: 530 },
                { question: "If a horse runs 100 meters in 10 seconds, what is its speed?", options: ["5 m/s", "10 m/s", "15 m/s", "20 m/s"], correctOptionIndex: 1, explanation: "Speed = Distance / Time = 100m / 10s = 10 m/s.", difficulty: "easy", source_page: 529 },
                { question: "A person buys 20 shares at $50 each. If the brokerage is $1 per share, what is the total cost?", options: ["$1000", "$1020", "$980", "$1050"], correctOptionIndex: 1, explanation: "Cost of shares = 20 * $50 = $1000. Brokerage = 20 * $1 = $20. Total cost = $1000 + $20 = $1020.", difficulty: "medium", source_page: 530 },
                { question: "In a 400m race, A can give B a start of 40m and C a start of 60m. If B and C run a race of 400m, by how much will B beat C?", options: ["20m", "22.22m", "25m", "30m"], correctOptionIndex: 1, explanation: "When A runs 400m, B runs 360m and C runs 340m. Ratio B:C = 360:340 = 18:17. When B runs 400m, C runs (17/18)*400 = 377.78m. B beats C by 400 - 377.78 = 22.22m.", difficulty: "tough", source_page: 529 },
                { question: "What is the difference between 'stock' and 'shares'?", options: ["No difference, they are synonyms", "Stock is a broader term for ownership, shares are individual units", "Shares are a broader term, stock is individual units", "Stock refers to debt, shares refer to equity"], correctOptionIndex: 1, explanation: "Shares are individual units of ownership, while stock can refer to a larger block of shares or a general term for equity.", difficulty: "tough", source_page: 530 },
                { question: "A company's shares are quoted at $90. If the face value is $100, what is the percentage discount?", options: ["5%", "10%", "15%", "20%"], correctOptionIndex: 1, explanation: "Discount = Face value - Market value = $100 - $90 = $10. Percentage discount = ($10/$100) * 100% = 10%.", difficulty: "medium", source_page: 530 },
                { question: "In a race, if A runs 100m and B runs 95m, what is the ratio of their speeds?", options: ["10:9", "20:19", "19:20", "1:1"], correctOptionIndex: 1, explanation: "The ratio of distances covered in the same time is the ratio of their speeds. So, 100:95 = 20:19.", difficulty: "medium", source_page: 529 }
            ];
            quizQuestions.push(...mathematicsMCQs);

            // Islamic Studies (33 MCQs) - Life of Prophet Muhammad (PBUH) - Prophethood to Migration: Pages 124-135
            const islamicStudiesMCQs = [
                { question: "At what age did Prophet Muhammad (PBUH) receive the first revelation?", options: ["30", "35", "40", "45"], correctOptionIndex: 2, explanation: "Prophet Muhammad (PBUH) received the first revelation at the age of 40.", difficulty: "easy", source_page: 124 },
                { question: "Where did Prophet Muhammad (PBUH) receive the first revelation?", options: ["Cave of Thawr", "Cave of Hira", "Mount Safa", "Kaaba"], correctOptionIndex: 1, explanation: "The first revelation came to Prophet Muhammad (PBUH) in the Cave of Hira.", difficulty: "easy", source_page: 124 },
                { question: "Who was the first person to believe in Prophet Muhammad (PBUH) from women?", options: ["Aisha (RA)", "Fatima (RA)", "Khadijah (RA)", "Zainab (RA)"], correctOptionIndex: 2, explanation: "Khadijah (RA), the Prophet's wife, was the first woman to accept Islam.", difficulty: "easy", source_page: 125 },
                { question: "Who was the first person to believe in Prophet Muhammad (PBUH) from men?", options: ["Umar (RA)", "Ali (RA)", "Abu Bakr (RA)", "Uthman (RA)"], correctOptionIndex: 2, explanation: "Abu Bakr (RA) was the first adult male to embrace Islam.", difficulty: "easy", source_page: 125 },
                { question: "What was the initial method of preaching Islam by Prophet Muhammad (PBUH)?", options: ["Publicly in markets", "Secretly among close companions", "Through written letters", "By debates"], correctOptionIndex: 1, explanation: "Initially, Islam was preached secretly among close friends and family.", difficulty: "medium", source_page: 126 },
                { question: "How many years did the Prophet (PBUH) preach Islam secretly?", options: ["1 year", "3 years", "5 years", "7 years"], correctOptionIndex: 1, explanation: "The Prophet (PBUH) preached Islam secretly for three years.", difficulty: "medium", source_page: 126 },
                { question: "What was the first public invitation to Islam given by Prophet Muhammad (PBUH)?", options: ["At Mount Safa", "At the Kaaba", "At the market of Ukaz", "At the house of Arqam"], correctOptionIndex: 0, explanation: "The first public call to Islam was made from Mount Safa.", difficulty: "medium", source_page: 127 },
                { question: "What is the year of sorrows (Aam-ul-Huzn) in Islamic history?", options: ["5th year of prophethood", "7th year of prophethood", "10th year of prophethood", "13th year of prophethood"], correctOptionIndex: 2, explanation: "The 10th year of prophethood is known as the Year of Sorrows due to the deaths of Khadijah (RA) and Abu Talib.", difficulty: "medium", source_page: 128 },
                { question: "What was the purpose of the boycott of Banu Hashim?", options: ["To force them to leave Mecca", "To force them to abandon Prophet Muhammad (PBUH)", "To force them to accept Islam", "To punish them for their beliefs"], correctOptionIndex: 1, explanation: "The boycott aimed to pressure Banu Hashim to withdraw their protection from the Prophet (PBUH).", difficulty: "medium", source_page: 128 },
                { question: "How long did the social boycott of Banu Hashim last?", options: ["1 year", "2 years", "3 years", "4 years"], correctOptionIndex: 2, explanation: "The boycott lasted for three years.", difficulty: "medium", source_page: 128 },
                { question: "What was the 'Miraj' (Ascension) of Prophet Muhammad (PBUH)?", options: ["A journey to Madina", "A journey to Jerusalem and then to the heavens", "A journey to Taif", "A journey to Yemen"], correctOptionIndex: 1, explanation: "The Miraj was a miraculous night journey from Mecca to Jerusalem and then to the heavens.", difficulty: "medium", source_page: 129 },
                { question: "Which prayer was made obligatory during Miraj?", options: ["Fajr", "Dhuhr", "Asr", "Salat (all five daily prayers)"], correctOptionIndex: 3, explanation: "All five daily prayers were made obligatory during the Miraj.", difficulty: "medium", source_page: 129 },
                { question: "What was the 'Pledge of Aqabah'?", options: ["An agreement between Muslims and Quraish", "An oath of allegiance by people of Yathrib (Madina) to Prophet Muhammad (PBUH)", "A treaty between Muslims and Jews", "A pledge to fight against polytheists"], correctOptionIndex: 1, explanation: "The Pledge of Aqabah was an oath of allegiance from the people of Yathrib to the Prophet (PBUH).", difficulty: "medium", source_page: 130 },
                { question: "How many pledges of Aqabah were there?", options: ["One", "Two", "Three", "Four"], correctOptionIndex: 1, explanation: "There were two pledges of Aqabah.", difficulty: "medium", source_page: 130 },
                { question: "What was the main reason for the migration (Hijra) to Madina?", options: ["Economic hardship in Mecca", "Persecution of Muslims in Mecca", "Desire for trade opportunities", "To establish a new city"], correctOptionIndex: 1, explanation: "The severe persecution faced by Muslims in Mecca necessitated the migration.", difficulty: "medium", source_page: 131 },
                { question: "Who accompanied Prophet Muhammad (PBUH) during his migration to Madina?", options: ["Umar (RA)", "Ali (RA)", "Abu Bakr (RA)", "Uthman (RA)"], correctOptionIndex: 2, explanation: "Abu Bakr (RA) was the sole companion of the Prophet (PBUH) during the Hijra.", difficulty: "medium", source_page: 132 },
                { question: "In which cave did Prophet Muhammad (PBUH) and Abu Bakr (RA) hide during the migration?", options: ["Cave of Hira", "Cave of Thawr", "Cave of Uhud", "Cave of Arafat"], correctOptionIndex: 1, explanation: "They hid in the Cave of Thawr to evade the Quraish.", difficulty: "medium", source_page: 132 },
                { question: "What was the name of the spider that spun a web at the entrance of the cave during the migration?", options: ["No specific name mentioned", "Arachne", "Sheba", "None of these"], correctOptionIndex: 0, explanation: "While a spider web is part of the narrative, the spider itself is not given a specific name.", difficulty: "medium", source_page: 132 },
                { question: "Who slept in Prophet Muhammad (PBUH)'s bed on the night of migration to deceive the Quraish?", options: ["Umar (RA)", "Abu Bakr (RA)", "Ali (RA)", "Uthman (RA)"], correctOptionIndex: 2, explanation: "Ali (RA) bravely slept in the Prophet's bed to ensure his safe departure.", difficulty: "medium", source_page: 133 },
                { question: "What was the first mosque built by Prophet Muhammad (PBUH) on his way to Madina?", options: ["Masjid-e-Nabawi", "Masjid-e-Quba", "Masjid-e-Haram", "Masjid-e-Aqsa"], correctOptionIndex: 1, explanation: "Masjid-e-Quba was the first mosque built by the Prophet (PBUH) upon his arrival near Madina.", difficulty: "medium", source_page: 134 },
                { question: "What was the name of the camel on which Prophet Muhammad (PBUH) rode during the migration?", options: ["Qaswa", "Adba", "Saba", "None of these"], correctOptionIndex: 0, explanation: "The Prophet's camel during the migration was named Qaswa.", difficulty: "medium", source_page: 134 },
                { question: "What was the significance of the 'Brotherhood of Madina' (Muwakhat)?", options: ["A military alliance", "A trade agreement", "A bond between Muhajireen and Ansar", "A political treaty"], correctOptionIndex: 2, explanation: "It established a strong bond of brotherhood between the Meccan immigrants (Muhajireen) and the Madinan helpers (Ansar).", difficulty: "medium", source_page: 135 },
                { question: "What was the first action taken by Prophet Muhammad (PBUH) upon arriving in Madina?", options: ["Building a market", "Establishing the Brotherhood", "Building Masjid-e-Nabawi", "Signing a treaty with Jews"], correctOptionIndex: 2, explanation: "The construction of Masjid-e-Nabawi was the first major undertaking in Madina.", difficulty: "tough", source_page: 135 },
                { question: "Who was the first martyr in Islam?", options: ["Umar (RA)", "Sumayyah bint Khayyat (RA)", "Bilal (RA)", "Hamza (RA)"], correctOptionIndex: 1, explanation: "Sumayyah (RA) was the first woman to be martyred for Islam.", difficulty: "tough", source_page: 126 },
                { question: "What was the 'Oath of Allegiance' taken by the first group of people from Yathrib (Madina) to Prophet Muhammad (PBUH) before the Hijra?", options: ["First Pledge of Aqabah", "Second Pledge of Aqabah", "Pledge of Rizwan", "Treaty of Hudaybiyyah"], correctOptionIndex: 0, explanation: "The first pledge by the people of Yathrib was the First Pledge of Aqabah.", difficulty: "tough", source_page: 130 },
                { question: "Who was the first child to accept Islam?", options: ["Zayd ibn Harithah (RA)", "Ali ibn Abi Talib (RA)", "Abdullah ibn Umar (RA)", "Anas ibn Malik (RA)"], correctOptionIndex: 1, explanation: "Ali (RA) was the first child to embrace Islam.", difficulty: "tough", source_page: 125 },
                { question: "What was the message conveyed by the first revelation to Prophet Muhammad (PBUH)?", options: ["Command to fight", "Command to worship", "Command to read and learn", "Command to migrate"], correctOptionIndex: 2, explanation: "The first revelation began with the command 'Iqra' (Read!).", difficulty: "medium", source_page: 124 },
                { question: "What was the name of the uncle of Prophet Muhammad (PBUH) who protected him from Quraish persecution despite not accepting Islam?", options: ["Hamza (RA)", "Abbas (RA)", "Abu Talib", "Abu Lahab"], correctOptionIndex: 2, explanation: "Abu Talib, though not a Muslim, provided crucial protection to the Prophet (PBUH).", difficulty: "medium", source_page: 128 },
                { question: "What was the significance of the first public sermon at Mount Safa?", options: ["It marked the beginning of open preaching of Islam", "It was a call for war against Quraish", "It was a trade announcement", "It was a farewell speech"], correctOptionIndex: 0, explanation: "This event signaled the transition from secret to public propagation of Islam.", difficulty: "tough", source_page: 127 },
                { question: "Which event immediately preceded the migration to Madina?", options: ["Battle of Badr", "Conquest of Mecca", "Miraj", "Second Pledge of Aqabah"], correctOptionIndex: 3, explanation: "The Second Pledge of Aqabah laid the groundwork for the Hijra.", difficulty: "tough", source_page: 131 },
                { question: "What was the main contribution of the Ansar (helpers) of Madina to the early Muslim community?", options: ["Providing financial aid only", "Providing shelter, support, and resources to the Muhajireen", "Leading military expeditions", "Establishing trade routes"], correctOptionIndex: 1, explanation: "The Ansar played a vital role in integrating the Muhajireen into Madinan society.", difficulty: "tough", source_page: 135 },
                { question: "What was the name of the Jewish tribe that initially lived in Madina when Prophet Muhammad (PBUH) migrated?", options: ["Banu Qaynuqa", "Banu Nadir", "Banu Qurayza", "All of the above"], correctOptionIndex: 3, explanation: "Several Jewish tribes, including Banu Qaynuqa, Banu Nadir, and Banu Qurayza, resided in Madina.", difficulty: "tough", source_page: 135 },
                { question: "What is the Islamic calendar year that marks the migration of Prophet Muhammad (PBUH) from Mecca to Madina?", options: ["1st Hijri", "5th Hijri", "10th Hijri", "13th Hijri"], correctOptionIndex: 0, explanation: "The migration (Hijra) marks the beginning of the Islamic calendar, corresponding to 1 Hijri.", difficulty: "medium", source_page: 131 }
            ];
            quizQuestions.push(...islamicStudiesMCQs);


            // Ensure exact counts for difficulty levels
            let easyQuestions = [];
            let mediumQuestions = [];
            let toughQuestions = [];

            // Categorize questions by initial difficulty
            quizQuestions.forEach(q => {
                if (q.difficulty === "easy") easyQuestions.push(q);
                else if (q.difficulty === "medium") mediumQuestions.push(q);
                else if (q.difficulty === "tough") toughQuestions.push(q);
            });

            // Adjust counts to meet target: 10 Easy, 50 Medium, 40 Tough
            // This logic ensures the final counts are as close as possible to the targets
            // by moving questions between categories if there's a surplus or deficit.

            // Adjust Easy (Target: 10)
            while (easyQuestions.length > 10) {
                mediumQuestions.push(easyQuestions.pop()); // Move surplus easy to medium
            }
            while (easyQuestions.length < 10 && mediumQuestions.length > 0) {
                easyQuestions.push(mediumQuestions.pop()); // Pull from medium if easy is short
            }

            // Adjust Tough (Target: 40)
            while (toughQuestions.length > 40) {
                mediumQuestions.push(toughQuestions.pop()); // Move surplus tough to medium
            }
            while (toughQuestions.length < 40 && mediumQuestions.length > 0) {
                toughQuestions.push(mediumQuestions.pop()); // Pull from medium if tough is short
            }

            // Adjust Medium (Target: 50) - this should be the last adjustment
            while (mediumQuestions.length > 50) {
                // If too many medium, try to push to tough first, then easy if possible, else discard
                if (toughQuestions.length < 40) {
                    toughQuestions.push(mediumQuestions.pop());
                } else if (easyQuestions.length < 10) {
                    easyQuestions.push(mediumQuestions.pop());
                } else {
                    mediumQuestions.pop(); // Discard if no place
                }
            }
            while (mediumQuestions.length < 50) {
                // If too few medium, pull from tough if tough has surplus, then easy if easy has surplus
                if (toughQuestions.length > 40) {
                    mediumQuestions.push(toughQuestions.pop());
                } else if (easyQuestions.length > 10) {
                    mediumQuestions.push(easyQuestions.pop());
                } else {
                    break; // Cannot meet target without generating more questions
                }
            }

            // Recombine the questions
            quizQuestions = [...easyQuestions, ...mediumQuestions, ...toughQuestions];
            shuffleArray(quizQuestions); // Shuffle the entire combined list

            // Ensure exactly 100 questions (trim if necessary, though the above logic aims for 100)
            quizQuestions = quizQuestions.slice(0, 100);

            // Randomly select one "Today's Special Question"
            specialQuestionIndex = Math.floor(Math.random() * quizQuestions.length);
            quizQuestions[specialQuestionIndex].special = true;

            // Apply 30% chance to shuffle the entire quiz order
            if (Math.random() < 0.3) {
                shuffleArray(quizQuestions);
                // After shuffling, find the new index of the special question
                specialQuestionIndex = quizQuestions.findIndex(q => q.special);
            }
        }

        // Initialize the quiz when the script loads
        document.addEventListener('DOMContentLoaded', () => {
            initializeQuiz();
            // Initial call to set correct sticky date position on load
            const liveDateElement = document.getElementById('liveDate');
            if (window.innerWidth < 768) {
                liveDateElement.style.alignSelf = 'flex-start';
            } else {
                liveDateElement.style.alignSelf = 'flex-end';
            }
        });

        // Handle mobile sticky date position on resize
        window.addEventListener('resize', () => {
            const liveDateElement = document.getElementById('liveDate');
            if (window.innerWidth < 768) {
                liveDateElement.style.alignSelf = 'flex-start';
            } else {
                liveDateElement.style.alignSelf = 'flex-end';
            }
        });
    </script>
</body>
</html>
